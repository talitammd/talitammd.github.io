<!DOCTYPE html>

<html lang="zh-CN">

<head>
  
  <meta name="baidu-site-verification" content="code-J1Qg17G6wT" />
  <title>分类：react - 卷不过没事了</title>
  <meta charset="UTF-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  
  

    <!-- Site Verification -->
    <meta name="baidu-site-verification" content="code-J1Qg17G6wT" />

  <link rel="shortcut icon" href="/images/head/head.jpg" type="image/png" />
  <meta property="og:type" content="website">
<meta property="og:title" content="卷不过没事了">
<meta property="og:url" content="http://example.com/categories/react/index.html">
<meta property="og:site_name" content="卷不过没事了">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Talita">
<meta name="twitter:card" content="summary">
  <link rel="stylesheet" href="https://lib.baomitu.com/highlight.js/9.15.8/styles/atom-one-dark.min.css" crossorigin>
  <link rel="stylesheet" href="/lib/mdui_043tiny/css/mdui.css">
  <link rel="stylesheet" href="/lib/iconfont/iconfont.css">
  <link rel="stylesheet" href="/lib/fancybox/css/jquery.fancybox.min.css">
  <link rel="stylesheet" href="https://lib.baomitu.com/justifiedGallery/3.8.1/css/justifiedGallery.min.css">
  
    <link rel="stylesheet" href="//at.alicdn.com/t/font_2421060_8z08qcz5sq3.css">
  
  <link rel="stylesheet" href="/css/style.css?v=1719645310118">
<meta name="generator" content="Hexo 7.2.0"></head>

<body class="mdui-drawer-body-left">
  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(/images/background/xiaomai.png)"></div>
    <div class="nexmoe-small" style="background-image: url(/images/background/lihui.png)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
        <div class="mdui-toolbar-spacer"></div>
        <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
        <a href="/" title="Talita" class="mdui-btn mdui-btn-icon"><img src="/images/head/me.jpeg" alt="Talita"></a>
       </div>
    </div>
  </div>
  <div id="nexmoe-header">
      <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Talita">
            <img src="/images/head/me.jpeg" alt="Talita" alt="Talita">
        </a>
    </div>
    <div class="nexmoe-count">
        <div class="nexmoe-count-item"><span>文章</span>7 <div class="item-radius"></div><div class="item-radius item-right"></div> </div>
        <div class="nexmoe-count-item"><span>标签</span>5<div class="item-radius"></div><div class="item-radius item-right"></div></div>
        <div class="nexmoe-count-item"><span>分类</span>5<div class="item-radius"></div><div class="item-radius item-right"></div></div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="首页">
            <i class="mdui-list-item-icon nexmoefont icon-meishi"></i>
            <div class="mdui-list-item-content">
                首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/archives.html" title="归档">
            <i class="mdui-list-item-icon nexmoefont icon-hanbao1"></i>
            <div class="mdui-list-item-content">
                归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about.html" title="关于">
            <i class="mdui-list-item-icon nexmoefont icon-jiubei1"></i>
            <div class="mdui-list-item-content">
                关于
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/friend.html" title="友链">
            <i class="mdui-list-item-icon nexmoefont icon-cola"></i>
            <div class="mdui-list-item-content">
                友链
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/download.html" title="下载中心">
            <i class="mdui-list-item-icon nexmoefont icon-tangguo"></i>
            <div class="mdui-list-item-content">
                下载中心
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
  
  
<!-- 站内搜索 -->

<div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search" >
        <form id="search-form">
            <label><input type="text" id="local-search-input" name="q" results="0" placeholder="站内搜索" class="input form-control" autocomplete="off" autocorrect="off"/></label>
            <!-- 清空/重置搜索框 -->
            <i class="fa fa-times" onclick="resetSearch()"></i>
        </form>
    </div>
    <div id="local-search-result"></div> <!-- 搜索结果区 -->
    <!-- <p class='no-result'></p> 无匹配时显示，注意在 CSS 中设置默认隐藏 -->
</div>


  
  <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="http://wpa.qq.com/msgrd?v=3&uin=2120252100&site=qq&menu=yes" target="_blank" mdui-tooltip="{content: 'QQ'}" style="color: rgb(64, 196, 255);background-color: rgba(64, 196, 255, .1);">
            <i class="nexmoefont icon-QQ"></i>
        </a><a class="mdui-ripple" href="mailto:tangyuxian@vip.qq.com" target="_blank" mdui-tooltip="{content: 'mail'}" style="color: rgb(249,8,8);background-color: rgba(249,8,8,.1);">
            <i class="nexmoefont icon-mail-fill"></i>
        </a><a class="mdui-ripple" href="https://blog.csdn.net/qq_40621378?type=blog" target="_blank" mdui-tooltip="{content: 'CSDN'}" style="color: rgb(199,29,35);background-color: rgba(199,29,35,.1);">
            <i class="nexmoefont icon-csdn"></i>
        </a><a class="mdui-ripple" href="https://www.cnblogs.com/lovetangyuxian/" target="_blank" mdui-tooltip="{content: '博客园'}" style="color: rgb(66, 214, 29);background-color: rgba(66, 214, 29, .1);">
            <i class="nexmoefont icon-bokeyuan"></i>
        </a><a class="mdui-ripple" href="https://github.com/tangyuxian/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a><a class="mdui-ripple" href="https://gitee.com/tangyuxian" target="_blank" mdui-tooltip="{content: 'gitee'}" style="color: rgb(255, 255, 255);background-color: rgb(199,29,35);">
            <i class="nexmoefont icon-mayun"></i>
        </a>
    </div>
</div>
  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章分类</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JavaScript/">JavaScript</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Node-js/">Node.js</a>
          <span class="category-list-count">2</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/TypeScript/">TypeScript</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/react/">react</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/代码管理/">代码管理</a>
          <span class="category-list-count">1</span>
        </li>

        
      </ul>

    </div>
  </div>


  
  
  <div class="nexmoe-widget-wrap">
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/TypeScript/" style="font-size: 10px;">TypeScript</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/node/" style="font-size: 20px;">node</a> <a href="/tags/react/" style="font-size: 10px;">react</a>
    </div>
    
  </div>

  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章归档</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/">2024</a><span class="archive-list-count">7</span></li></ul>
    </div>
  </div>


<style>
.nexmoe-widget .archive-list-count{
	position : absolute;
	right: 15px;
	top:9px;
	color: #DDD;
}
</style>

  
</aside>
    <div class="nexmoe-copyright">
        &copy; 2024 Talita
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/tangyuxian/hexo-theme-tangyuxian" target="_blank">Tangyuxian</a><br/>
        <a href="http://beian.miit.gov.cn" target="_blank">辽ICP备2021002341号</a><br/>
        
        <div style="font-size: 12px">
            <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            本站总访问量  <a id="busuanzi_value_site_pv"></a> 次<br />
            本站访客数<a id="busuanzi_value_site_uv"></a>人次
        </div>
        
        
    </div>

</div><!-- .nexmoe-drawer -->

  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
        <section class="nexmoe-posts">
    
    <div class="nexmoe-post">
        <a href="/2024/06/27/react/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 26.666666666666668%;">
                    <img data-src="/images/post/react.png" data-sizes="auto" alt="react" class="lazyload">
                    <h1>react</h1>
                </div>
            
        </a>
        
        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2024年06月27日</a>
            <a><i class="nexmoefont icon-areachart"></i>4.5k 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 19 分钟</a>
        </div>
        
        <article>
            <!-- 
                <h2 id="认识-React"><a href="#认识-React" class="headerlink" title="认识 React"></a>认识 React</h2><p>React 的颠覆式创新点：</p>
<ol>
<li><p><strong>虚拟 DOM 机制：</strong>大幅度降低了 UI 上的操作难度</p>
<p>React 会自动用最优的方式将虚拟 DOM 更新到真实的 DOM 节点，不需要再使用浏览器 API 。<strong>当数据发生变化时，UI 能够自动把变化反映出来。</strong></p>
</li>
<li><p><strong>JSX 语法：</strong>简化代码</p>
</li>
</ol>
<p>16.8 版本引入了 Hooks 概念，解决了<strong>业务逻辑的重用问题</strong></p>
<p><img data-fancybox="gallery" data-sizes="auto" data-src="/2024/06/27/react/Untitled.png" alt="Untitled" class="lazyload"></p>
<p>React 需要理解三个概念：组件、状态和 JSX。</p>
<ul>
<li>组件：React 中所有的元素都是组件，分为两种：<ol>
<li>内置组件：<strong>映射到 HTML 节点的组件</strong>，例如 <code>div、input、table</code> 等，作为一种约定，它们都是小写字母。</li>
<li>自定义组件：<strong>自己创建的组件，使用时必须以大写字母开头</strong>，例如<code>TopicList</code>、<code>TopicDetail</code>。</li>
</ol>
</li>
<li>状态：React 中的状态指的是与UI显示直接相关的数据，当这些数据发生变化时，React 会自动重新渲染组件以反映这些变化。</li>
<li>JSX：简化代码，本质和原生 JavaScript 没区别。</li>
</ul>
<h3 id="如何创建一个-React-应用？"><a href="#如何创建一个-React-应用？" class="headerlink" title="如何创建一个 React 应用？"></a><strong>如何创建一个 React 应用？</strong></h3><p>React官方推荐我们使用<code>Create React App</code>，使用如下命令创建：</p>
<pre><code class="bash">npx create-react-app my-app 
cd my-app
npm start
</code></pre>
<p>创建的项目结构非常简单，<code>src/index.js</code> 是程序的入口，<code>App.js</code>是整个应用程序的根组件，主要做一些配置的事情。当然还有以下常见脚手架：</p>
<ul>
<li>Next.js：如果你是在用 Node.js 构建服务端渲染的网站</li>
<li>Gatsby：如果你是在构建面向内容的静态网站</li>
<li>nwb：用于React应用程序、库和其他web npm模块的工具包</li>
<li>razzle：创建没有配置的服务器呈现的通用JavaScript应用程序</li>
<li>Neutrino：创建和构建零初始配置的现代JavaScript应用程序</li>
<li>Umijs：蚂蚁金服脚手架</li>
<li>Icejs：阿里巴巴脚手架</li>
</ul>
<h2 id="理解Hooks"><a href="#理解Hooks" class="headerlink" title="理解Hooks"></a>理解Hooks</h2><h3 id="重新思考-React-组件的本质"><a href="#重新思考-React-组件的本质" class="headerlink" title="重新思考 React 组件的本质"></a><strong>重新思考 React 组件的本质</strong></h3><p>React 组件中，状态发生变化时，UI 会自动变化，即<strong>所谓的数据绑定。</strong></p>
<p>React 要保证的，就是每当状态发生变化时，函数会重新执行，组件会重新渲染（re-render）。</p>
<p>但这并不是说组件的DOM树会被完全重建；React使用了一个名为<code>React Fiber</code>的算法，它包括计算新的 React 元素树，然后与实际DOM进行比较，并计算出最小的DOM更新，生成新的 DOM 树更新到浏览器。</p>
<p>在 hooks 机制出现之前，函数组件的局限性在于无法存在内部状态，而且也无法提供完<br>整的生命周期机制，这就极大限制了函数组件的大规模使用。</p>
<p>函数和对象不同，并没有一个实例的对象能够在多次执行之间保存状态，那势必需要一个函数之外的空间来保存这个状态，而且要能够检测其变化，从而能够触发函数组件的重新渲染。</p>
<p>在 React 中，这个机制就是 Hooks，Hooks 就是“钩子”的意思。<strong>把某个目标结果钩到某个可能会变化的数据源或者事件源上，那么当被钩到的数据或事件发生变化时，产生这个目标结果的代码会重新执行，产生最终更新后的结果，也就是DOM树。</strong></p>
<p>对于 <code>useCallback</code>、<code>useMemo</code> 这样与缓存相关的组件，则是在依赖项发生变化时去更新缓存。</p>
<blockquote>
<p>常用数据源：定时器，监听滚动，键盘事件，复用Fetch，父组件props</p>
</blockquote>
<p><strong>Hooks 使用原则：</strong></p>
<ol>
<li>只能在函数组件或自定义 Hook 的顶层调用，不能在循环、条件或嵌套函数中调用</li>
<li>每个 Hook 调用都会创建一个独立的状态变量，可以在同一个组件中多次调用 Hook 来创建多个状态变量</li>
<li>不能将 Hook 放在 <code>return</code> 之后，即使<code>return</code> 只是可能会被执行到</li>
</ol>
<h3 id="useState：让函数组件具有维持状态的能力"><a href="#useState：让函数组件具有维持状态的能力" class="headerlink" title="useState：让函数组件具有维持状态的能力"></a><strong>useState：让函数组件具有维持状态的能力</strong></h3><p>纯函数不能有状态，所以把状态放在钩子里面，<code>useState()</code>用于为函数组件引入状态。</p>
<p>用法：</p>
<ol>
<li><code>useState(initialState)</code> 的参数 <code>initialState</code> 是创建 <code>state</code> 的初始值。</li>
<li><code>useState()</code> 的返回值是一个数组。第一个数组元素用来读取 <code>state</code> 的值，第二个则是用来设置<code>state</code> 值的函数，约定是<code>set</code>前缀加上状态的变量名。</li>
</ol>
<p><code>state</code>是组件内部的私有对象，只能通过<code>setState</code>方法来更新。其他组件不能直接看到或修改这个<code>state</code>，除非通过组件之间的通信机制，<code>props、context</code>或<code>Redux</code>等状态管理库。</p>
<p>在使用过程中，后者的性能要优于前者，因为后者在<code>count</code> 发生变化的时候，不会创建新的函数引用，这样接收这个属性的组件就不需要刷新，只用更新变量即可</p>
<pre><code class="jsx">const handleIncrement = useCallback(() =&gt; setCount(count + 1), [count]); 
const handleIncrement = useCallback(() =&gt; setCount(count =&gt; count + 1), []);
</code></pre>
<p><strong>什么样的值应该保存在 <code>state</code> 中?</strong></p>
<p><code>state</code> 中永远不要保存可以通过计算得到的值。比如：</p>
<ol>
<li>如果从 <code>props</code> 传递过来的值无法直接使用，而是要通过一定的计算后再在 UI 上展示。那么我们要做的就是每次用的时候，都重新计算一下，或者利用某些 cache 机制，而不是将结果直接放到 <code>state</code> 里。</li>
<li>如果需要读取 URL 中的参数，那么我们可以在每次需要用的时候都从 URL 中读取，而不是读出来直接放到 <code>state</code> 里。</li>
<li>每次要用 <code>cookie</code>、<code>localStorage</code> 的值的时候直接去读取，而不是读出来后放到 <code>state</code> 里。</li>
</ol>
<p><strong>无状态组件：</strong></p>
<p><code>state</code> 虽然便于维护状态，但也有自己的弊端：</p>
<ol>
<li><p>一旦组件有自己状态，意味着组件如果重新创建，就需要有恢复状态的过程，这通常会让组件变得更复杂。</p>
<p><em>比如一个组件想在服务器端请求获取一个用户列表并显示，如果把读取到的数据放到本组件的 <code>state</code> 里，那么每个用到这个组件的地方，就都需要重新获取一遍。</em></p>
</li>
<li><p>有状态组件在每次渲染时都需要执行生命周期方法和<code>render</code>方法。</p>
</li>
</ol>
<p>而无状态组件只关注接收<code>props</code>并渲染UI，并且由于只是函数只需要执行函数，没有内部状态或复杂的生命周期方法，只是一个纯粹的表现层，没有太多的业务逻辑，非常易于使用、测试和维护。</p>
<h3 id="useEffect：执行副作用"><a href="#useEffect：执行副作用" class="headerlink" title="useEffect：执行副作用"></a><strong>useEffect：执行副作用</strong></h3><p><code>useEffect()</code>用来引入具有副作用的操作，<strong>每次组件 render 完后判断依赖并执行。</strong></p>
<p>“副作用”是一个编程术语，通常指的是在函数执行过程中，除了返回结果之外还产生的其他影响。在纯函数式编程中，函数通常只根据输入计算输出，而不产生任何副作用。但在React等现代前端框架中，由于我们需要与DOM交互、处理用户输入、从服务器获取数据等，因此副作用是不可避免的。</p>
<p>用法：</p>
<pre><code class="jsx">useEffect(()  =&gt;  &#123;
  // Async Action
&#125;, [dependencies])
</code></pre>
<ol>
<li>没有依赖项：每次render后都会重新执行</li>
<li>空数组：只在函数首次执行时触发</li>
<li>存在依赖项：依赖项发生变化时自动执行</li>
<li>回调中存在<code>return</code>：组件销毁时的清理操作</li>
</ol>
<p><strong>注意事项：</strong></p>
<ol>
<li>回调函数中用到的变量一定要在依赖项中定义</li>
<li>函数是不会变化的，不要监听函数</li>
<li>React 会使用浅比较来对比依赖项是否发生了变化，所以要特别注意数组或者对象类<br>型。如果你是每次创建一个新对象，即使和之前的值是等价的，也会被认为是依赖项发生了变化</li>
</ol>
<h3 id="useCallback：缓存回调函数"><a href="#useCallback：缓存回调函数" class="headerlink" title="useCallback：缓存回调函数"></a><strong>useCallback：缓存回调函数</strong></h3><p>在 React 函数组件中，每次 UI 变化都是通过重新执行整个函数来完成的，这会导致一些函数和变量的重复定义，增加系统开销。</p>
<pre><code class="jsx">import React, &#123; useState &#125; from &quot;react&quot;;
export default function Counter() &#123;
  const [count, setCount] = useState(0);
  const handleIncrement = () =&gt; setCount(count + 1);
  return &lt;button onClick=&#123;handleIncrement&#125;&gt;&#123;count&#125;&lt;/button&gt;;
&#125;
</code></pre>
<p>思考下这个过程，每次组件状态发生变化的时候，函数组件都会重新执行一遍。每次执行都会创建一个新的事件处理函数 <code>handleIncrement</code>。函数中又包含了 <code>count</code> 变量的闭包，以确保每次能够得到正确的结果。</p>
<p>这也意味着，即使 <code>count</code> 没有发生变化，每次刷新时也会创建一个新的函数。这样做不仅增加了系统的开销，更重要的是：<strong>每次创建新函数都会使组件的 props 刷新，从而让组件重新渲染</strong>。</p>
<p>因此，我们需要做到的是：<strong>只有当 count 发生变化时，我们才需要重新定义一个回调<br>函数，</strong>这正是 <code>useCallback</code> 这个 Hook 的作用。</p>
<p>用法：</p>
<pre><code class="jsx">useCallback(fn, deps)
</code></pre>
<p>只有当依赖变量 <code>deps</code> 发生变化时， 才会重新声明 <code>fn</code> 这个回调函数。上面例子通过 <code>useCallback</code> 来进行性能的优化：</p>
<pre><code class="jsx">const handleIncrement = useCallback(() =&gt; setCount(count + 1), [count]);
</code></pre>
<p>这样，只有 <code>count</code> 发生变化的时候，才需要重新创建一个回调函数。而接收这个回调函数作为属性的组件，也不会频繁地需要重新渲染。</p>
<p>除了 <code>useCallback</code>，<code>useMemo</code> 也是为了缓存而设计的。只不过 <code>useCallback</code> 缓存的是 一个函数，而 <code>useMemo</code> 缓存的是计算的结果。</p>
<h3 id="useMemo：缓存计算的结果"><a href="#useMemo：缓存计算的结果" class="headerlink" title="useMemo：缓存计算的结果"></a><strong>useMemo：缓存计算的结果</strong></h3><p><strong>如果某个数据是通过其它数据计算得到的，那么只有当用到的数据，也就是依赖的数据发生变化的时候，才应该需要重新计算</strong>。</p>
<pre><code class="jsx">useMemo(fn, deps);
</code></pre>
<p>其中，<code>fn</code> 是产生所需数据的一个计算函数，<code>deps</code> 是依赖项。</p>
<p>避免重复计算不仅节省了计算开销，还<strong>避免子组件的重复渲染</strong>。</p>
<pre><code class="jsx">const userToShow = useMemo(()=&gt;&#123;
  if(!user) return null
  return user.data.filter((user)=&gt;&#123;
      return user.first_name.includes(searchKey)
  &#125;)
&#125;,[user,searchKey])
</code></pre>
<p><code>useCallback</code> 的功能可以用 <code>useMemo</code> 来实现：</p>
<pre><code class="jsx">const myEventHandler = useMemo(() =&gt; &#123; 
    // 返回一个函数作为缓存结果
    return () =&gt; &#123;
    // 在这里进行事件处理
    &#125;
&#125;, [dep1, dep2]);
</code></pre>
<p>从本质上来说，它们做了同一件事情：<strong>建立了一个绑定某个结果到依赖数据的关系。只有当依赖变了，这个结果才需要被重新得到</strong>。</p>
<h3 id="useRef：在多次渲染之间共享数据"><a href="#useRef：在多次渲染之间共享数据" class="headerlink" title="useRef：在多次渲染之间共享数据"></a>useRef：在多次渲染之间共享数据</h3><p>函数组件和类组件不一样，没有在多次渲染之间共享数据的能力。React 提供了 <code>useRef</code>这个 Hook，在函数组件之外创建的一个容器空间，用来模拟类组件的成员变量。</p>
<pre><code class="tsx">const myRefContainer = useRef(initialValue);
</code></pre>
<p> <code>useRef</code>返回的是一个包含<code>.current</code>属性的对象，这个属性可以指向任何类型的值，并且这个值在组件的多次渲染之间会保持不变。</p>
<p>使用场景：</p>
<ol>
<li><p><strong>访问 DOM 元素</strong>：<code>useRef</code> 最常见的用途是获取对 DOM 元素的直接引用。例如，你可能想要聚焦一个输入框，或者测量某个元素的大小</p>
<pre><code class="jsx">function TextInputWithFocusButton() &#123;  
  const inputElement = useRef(null);  
  
  const handleClick = () =&gt; &#123;
      // current属性指向了真实的dom节点，从而可以调用节点的方法  
    inputElement.current.focus();  
  &#125;;  
  
  return (  
    &lt;&gt;  
      &lt;input ref=&#123;inputElement&#125; type=&quot;text&quot; /&gt;  
  
      &lt;button onClick=&#123;handleClick&#125;&gt;Focus the input&lt;/button&gt;  
    &lt;/&gt;  
  );  
&#125;
</code></pre>
</li>
<li><p><strong>存储变量值</strong>：存储不会触发重新渲染的值，例如定时器 ID、上一次的滚动位置、或者其他任何你需要在组件的不同生命周期中保持的数据。</p>
<pre><code class="jsx">import React, &#123; useCallback, useState, useRef &#125; from &quot;react&quot;;
export default function Timer() &#123;
  const [time, setTime] = useState(0);
  const timer = useRef(null);
  const start = useCallback(()=&gt;&#123;
    // 依赖项数组为空，代表多次渲染下函数的引用依然不变，不必再重新创建
    // 将定时器作为ref，可以在多次渲染之间保留定时器
    // 但是不影响time的值，time的值正常变化
    timer.current = window.setInterval(()=&gt;&#123;
      setTime(time=&gt;time+1)
    &#125;,1000)
  &#125;,[])
  const stop = useCallback(() =&gt; &#123;
    // 按下stop会清除定时器，将定时器移除
    // 这样可以在多次渲染之间保证定时器的引用不会被重新创建，创建和删除的始终是同一个定时器
    // 虽然这一点useState也可以做到，但是useState每次更新值都会导致组件被重新渲染
    // 显然定时器的清除和创建是不需要组件重新渲染的，因此使用useRef可以节省开销
    // 此外，useRef的更新是实时的，你可以立刻看到更新后的值
    // 但是state由于涉及重新渲染，react出于性能考虑，在使用set更新之后并不会立即更新状态和重新渲染，而是累积几个更新一起渲染来提升性能
    window.clearInterval(timer.current);
    timer.current = null;
  &#125;, []);
  return (
    &lt;div&gt;
      &#123;time / 10&#125; seconds
      &lt;br /&gt;
      &lt;button onClick=&#123;start&#125;&gt;Start&lt;/button&gt;
      &lt;button onClick=&#123;stop&#125;&gt;Stop&lt;/button&gt;
    &lt;/div&gt;
  );
&#125;
</code></pre>
</li>
<li><p><strong>将值传递给子组件</strong>：在某些情况下，你可能需要将父组件中的某个值传递给子组件，但这个值不需要是 React 状态。使用 <code>useRef</code> 可以避免不必要的重新渲染。</p>
</li>
<li><p><strong>保持不变的回调函数引用</strong>：虽然 <code>useCallback</code> 通常用于这个目的，但在某些情况下，<code>useRef</code> 可以用来存储一个不会改变的回调函数引用。</p>
</li>
</ol>
<h3 id="useContext：定义全局状态"><a href="#useContext：定义全局状态" class="headerlink" title="useContext：定义全局状态"></a><strong>useContext：定义全局状态</strong></h3><p>React 组件之间的状态传递方式只有三种：<code>props</code>、<code>Context</code>、<code>Redux</code>等全局状态管理库</p>
<p><code>props</code> 只能在父子组件之间进行，如果要跨层次，或者同层的组件之间要进行数据的共享，React 提供了 <code>Context</code> 这样一个机制，能够让所有在某个组件开始的组件树上访问和修改这个 <code>Context</code>。</p>
<p>创建一个<code>Context</code>对象：</p>
<pre><code class="jsx">const MyContext = createContext(initialValue);
</code></pre>
<p><code>Context</code>对象具有一个 <code>Provider</code> 的属性，一般是作为组件树的根组件，为其后代组件提供 <code>Context</code> 的值，因此<code>value</code>属性是必须的，即使在创建的时候已经定义了初始值：</p>
<pre><code class="jsx">&lt;ThemeContext.Provider value=&quot;dark&quot;&gt;  
  &lt;Toolbar /&gt;  
&lt;/ThemeContext.Provider&gt;
</code></pre>
<p>使用<code>Context</code>中的数据：</p>
<pre><code class="jsx">const theme = useContext(ThemeContext);
</code></pre>
<p><code>Context</code>看上去就是一个全局的数据，为什么要设计这样一 个复杂的机制，而不是直接用一个全局的变量去保存数据呢，就是<strong>为了能够进行数据的绑定</strong>。</p>
<p>它和 <code>state</code> 一样，数据变化是可以引起组件的重新渲染的，如果只是一个全局变量的话就没有这种功能了。</p>
<p>把<code>Context</code>的<code>value</code>值用<code>state</code>来保存，还能把<code>Context</code>也变成一个动态的变量。</p>
<pre><code class="jsx">function ThemeBtn(props) &#123;
  // 如果不使用useContext，是无法直接使用Context中的值的
  const theme = useContext(ThemeContext);
  return (
    &lt;button
      style=&#123;&#123;
        background: theme.background,
        color: theme.foreground,
      &#125;&#125;
      onClick=&#123;props.click&#125;
    &gt;
      Look here!
    &lt;/button&gt;
  );
&#125;

export default function Theme() &#123;
  const [color, setColor] = useState(&quot;light&quot;);
  const toggleColor = useCallback(() =&gt; &#123;
    setColor((color) =&gt; (color === &quot;light&quot; ? &quot;dark&quot; : &quot;light&quot;));
  &#125;, []);
  return (
    &lt;ThemeContext.Provider value=&#123;themes[color]&#125;&gt;
      &lt;ThemeBtn click=&#123;toggleColor&#125; /&gt;
      // 其他组件
    &lt;/ThemeContext.Provider&gt;
  );
&#125;
</code></pre>
<p><code>Context</code>同样有局限性：</p>
<ol>
<li><code>Context</code>的变化很难追踪造成调试困难</li>
<li>组件复用比较困难，必须保证<code>Context</code>的存在才能复用</li>
</ol>
<p>所以在 React 的开发中，除了像 Theme、Language 等一目了然的需要全局设置的变量外，很少会使用 Context 来做太多数据的共享。</p>
<h3 id="如何创建自定义-Hooks"><a href="#如何创建自定义-Hooks" class="headerlink" title="如何创建自定义 Hooks?"></a><strong>如何创建自定义 Hooks?</strong></h3><p>自定义 Hooks 在形式上就是<strong>声明一个名字以 use 开头的函数</strong>，比如<code>useCounter</code>。但是要注意，自定义 Hooks 在<strong>函数中需要用到其它Hooks。</strong></p>
<pre><code class="jsx">import React, &#123; useCallback, useState &#125; from &quot;react&quot;;
function useCounter()&#123;
  const [count, setCount] = useState(0);
  const handleIncrement = useCallback(() =&gt; setCount(count=&gt;count + 1), []);
  const handleDecrement = useCallback(() =&gt; setCount(count=&gt;count - 1), []);
  const reset = useCallback(() =&gt; setCount(0), []);
  return &#123;count,handleIncrement,handleDecrement,reset&#125;;
&#125;
// 另一个js文件
export default function Counter() &#123;
  const &#123;count,handleIncrement,handleDecrement,reset&#125;=useCounter()
  return (&lt;div&gt;
    &lt;button onClick=&#123;handleIncrement&#125;&gt;+&lt;/button&gt;
    &lt;p&gt;&#123;count&#125;&lt;/p&gt;
    &lt;button onClick=&#123;handleDecrement&#125;&gt;-&lt;/button&gt;
    &lt;button onClick=&#123;reset&#125;&gt;reset&lt;/button&gt;
  &lt;/div&gt;)
&#125;
</code></pre>
<p>通过自定义Hook的方式，可以把逻辑提取出来，成为一个单独的Hook，<strong>一方面能让这个逻辑得到重用，另外一方面也能让代码更加语义化</strong>，<strong>并且易于理解和维护。</strong></p>
<p><strong>三个典型的业务场景：</strong></p>
<ol>
<li><p><strong>封装通用逻辑：useAsync</strong></p>
<p><strong>发起异步请求获取数据并显示在界面上：</strong>请求正确返回、UI 展现数据、处理请求出错</p>
<p>为什么不写一个工具类，而是封装成Hooks呢？写成工具类还能用Hook，能用state吗</p>
<pre><code class="jsx">import React, &#123; useCallback, useState &#125; from &quot;react&quot;;
const useAsync = (asyncFn) =&gt; &#123;
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(false);
  const [err, setErr] = useState(null);
  const execute = useCallback(() =&gt; &#123;
    // 请求开始，清除数据列表和错误，设置loading状态
    setLoading(true);
    setData(null);
    setErr(null);
    return asyncFn()
      .then((res) =&gt; &#123;
        // 如果请求成功，将数据写进data，设置loading为false
        setData(res);
        setLoading(false);
      &#125;)
      .catch((err) =&gt; &#123;
        setErr(err);
        setLoading(false);
      &#125;);
  &#125;, [asyncFn]);
  return &#123; execute, loading, data, err &#125;;
&#125;;
export default function UserList() &#123;
  const &#123;
    execute: fetchUsers,
    loading,
    data: users,
    err,
  &#125; = useAsync(async () =&gt; &#123;
    const res = await fetch(&quot;https://reqres.in/api/users/&quot;);
    const json = await res.json();
    return json.data;
  &#125;);
  return (
    &lt;div&gt;
      &lt;button onClick=&#123;fetchUsers&#125; disabled=&#123;loading&#125;&gt;
        &#123;loading ? &quot;loading...&quot; : &quot;Show Users&quot;&#125;
      &lt;/button&gt;
      &#123;err &amp;&amp; &lt;div&gt;出现错误&lt;/div&gt;&#125;
      &lt;br /&gt;
      &lt;ul&gt;
        &#123;users &amp;&amp;
          users.length &gt; 0 &amp;&amp;
          users.map((user) =&gt; &lt;li key=&#123;user.id&#125;&gt;&#123;user.first_name&#125;&lt;/li&gt;)&#125;
      &lt;/ul&gt;
    &lt;/div&gt;
  );
&#125;
</code></pre>
</li>
</ol>

             -->
        </article>
    </div>
    
</section>


        <div class="nexmoe-post-right">
          
            <div class="nexmoe-fixed">
              <div class="nexmoe-tool">
                <a href="#" aria-label="回到顶部" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
              </div>
            </div>
          
        </div>
    </div>
  </div>
  <div id="nexmoe-pendant">
    <div class="nexmoe-drawer mdui-drawer nexmoe-pd" id="drawer">
        
            <div class="nexmoe-pd-item">
                <div class="clock">
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="memory"></div>
        <div class="needle" id="hours"></div>
        <div class="needle" id="minutes"></div>
        <div class="needle" id="seconds"></div>
        <div class="clock_logo">

        </div>

    </div>
<style>
    .clock {
        background-color: #ffffff;
        width: 70vw;
        height: 70vw;
        max-width: 70vh;
        max-height: 70vh;
        border: solid 2.8vw #242424;
        position: relative;
        overflow: hidden;
        border-radius: 50%;
        box-sizing: border-box;
        box-shadow: 0 1.4vw 2.8vw rgba(0, 0, 0, 0.8);
        zoom:0.2
    }

    .memory {
        position: absolute;
        top: 50%;
        left: 50%;
        transform-origin: center;
    }

    .memory:nth-child(1) {
        background-color: #424242;
        width: 2%;
        height: 8%;
        transform: translate(-50%, -50%) rotate(0deg) translateY(-520%);
    }

    .memory:nth-child(2) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(6deg) translateY(-1461%);
    }

    .memory:nth-child(3) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(12deg) translateY(-1461%);
    }

    .memory:nth-child(4) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(18deg) translateY(-1461%);
    }

    .memory:nth-child(5) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(24deg) translateY(-1461%);
    }

    .memory:nth-child(6) {
        background-color: #424242;
        width: 2%;
        height: 8%;
        transform: translate(-50%, -50%) rotate(30deg) translateY(-520%);
    }

    .memory:nth-child(7) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(36deg) translateY(-1461%);
    }

    .memory:nth-child(8) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(42deg) translateY(-1461%);
    }

    .memory:nth-child(9) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(48deg) translateY(-1461%);
    }

    .memory:nth-child(10) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(54deg) translateY(-1461%);
    }

    .memory:nth-child(11) {
        background-color: #424242;
        width: 2%;
        height: 8%;
        transform: translate(-50%, -50%) rotate(60deg) translateY(-520%);
    }

    .memory:nth-child(12) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(66deg) translateY(-1461%);
    }

    .memory:nth-child(13) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(72deg) translateY(-1461%);
    }

    .memory:nth-child(14) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(78deg) translateY(-1461%);
    }

    .memory:nth-child(15) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(84deg) translateY(-1461%);
    }

    .memory:nth-child(16) {
        background-color: #424242;
        width: 2%;
        height: 8%;
        transform: translate(-50%, -50%) rotate(90deg) translateY(-520%);
    }

    .memory:nth-child(17) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(96deg) translateY(-1461%);
    }

    .memory:nth-child(18) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(102deg) translateY(-1461%);
    }

    .memory:nth-child(19) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(108deg) translateY(-1461%);
    }

    .memory:nth-child(20) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(114deg) translateY(-1461%);
    }

    .memory:nth-child(21) {
        background-color: #424242;
        width: 2%;
        height: 8%;
        transform: translate(-50%, -50%) rotate(120deg) translateY(-520%);
    }

    .memory:nth-child(22) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(126deg) translateY(-1461%);
    }

    .memory:nth-child(23) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(132deg) translateY(-1461%);
    }

    .memory:nth-child(24) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(138deg) translateY(-1461%);
    }

    .memory:nth-child(25) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(144deg) translateY(-1461%);
    }

    .memory:nth-child(26) {
        background-color: #424242;
        width: 2%;
        height: 8%;
        transform: translate(-50%, -50%) rotate(150deg) translateY(-520%);
    }

    .memory:nth-child(27) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(156deg) translateY(-1461%);
    }

    .memory:nth-child(28) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(162deg) translateY(-1461%);
    }

    .memory:nth-child(29) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(168deg) translateY(-1461%);
    }

    .memory:nth-child(30) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(174deg) translateY(-1461%);
    }

    .memory:nth-child(31) {
        background-color: #424242;
        width: 2%;
        height: 8%;
        transform: translate(-50%, -50%) rotate(180deg) translateY(-520%);
    }

    .memory:nth-child(32) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(186deg) translateY(-1461%);
    }

    .memory:nth-child(33) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(192deg) translateY(-1461%);
    }

    .memory:nth-child(34) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(198deg) translateY(-1461%);
    }

    .memory:nth-child(35) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(204deg) translateY(-1461%);
    }

    .memory:nth-child(36) {
        background-color: #424242;
        width: 2%;
        height: 8%;
        transform: translate(-50%, -50%) rotate(210deg) translateY(-520%);
    }

    .memory:nth-child(37) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(216deg) translateY(-1461%);
    }

    .memory:nth-child(38) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(222deg) translateY(-1461%);
    }

    .memory:nth-child(39) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(228deg) translateY(-1461%);
    }

    .memory:nth-child(40) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(234deg) translateY(-1461%);
    }

    .memory:nth-child(41) {
        background-color: #424242;
        width: 2%;
        height: 8%;
        transform: translate(-50%, -50%) rotate(240deg) translateY(-520%);
    }

    .memory:nth-child(42) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(246deg) translateY(-1461%);
    }

    .memory:nth-child(43) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(252deg) translateY(-1461%);
    }

    .memory:nth-child(44) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(258deg) translateY(-1461%);
    }

    .memory:nth-child(45) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(264deg) translateY(-1461%);
    }

    .memory:nth-child(46) {
        background-color: #424242;
        width: 2%;
        height: 8%;
        transform: translate(-50%, -50%) rotate(270deg) translateY(-520%);
    }

    .memory:nth-child(47) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(276deg) translateY(-1461%);
    }

    .memory:nth-child(48) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(282deg) translateY(-1461%);
    }

    .memory:nth-child(49) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(288deg) translateY(-1461%);
    }

    .memory:nth-child(50) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(294deg) translateY(-1461%);
    }

    .memory:nth-child(51) {
        background-color: #424242;
        width: 2%;
        height: 8%;
        transform: translate(-50%, -50%) rotate(300deg) translateY(-520%);
    }

    .memory:nth-child(52) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(306deg) translateY(-1461%);
    }

    .memory:nth-child(53) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(312deg) translateY(-1461%);
    }

    .memory:nth-child(54) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(318deg) translateY(-1461%);
    }

    .memory:nth-child(55) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(324deg) translateY(-1461%);
    }

    .memory:nth-child(56) {
        background-color: #424242;
        width: 2%;
        height: 8%;
        transform: translate(-50%, -50%) rotate(330deg) translateY(-520%);
    }

    .memory:nth-child(57) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(336deg) translateY(-1461%);
    }

    .memory:nth-child(58) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(342deg) translateY(-1461%);
    }

    .memory:nth-child(59) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(348deg) translateY(-1461%);
    }

    .memory:nth-child(60) {
        background-color: #949494;
        width: 1%;
        height: 3%;
        transform: translate(-50%, -50%) rotate(354deg) translateY(-1461%);
    }

    .needle {
        position: absolute;
        top: 50%;
        left: 50%;
        transform-origin: center;
    }

    .needle#hours {
        background-color: #1f1f1f;
        width: 4%;
        height: 30%;
        transform-origin: center 75%;
        transform: translate(-50%, -75%);
    }

    .needle#hours.moving {
        transition: transform 150ms ease-out;
    }

    .needle#hours:after {
        content: '';
        background-color: #1f1f1f;
        width: 4vw;
        height: 4vw;
        max-width: 4vh;
        max-height: 4vh;
        display: block;
        position: absolute;
        top: 75%;
        left: 50%;
        box-sizing: border-box;
        border-radius: 50%;
        transform: translate(-50%, -50%);
    }

    .needle#minutes {
        background-color: #1f1f1f;
        width: 2%;
        height: 45%;
        transform-origin: center 75%;
        transform: translate(-50%, -75%);
    }

    .needle#minutes.moving {
        transition: transform 150ms ease-out;
    }

    .needle#minutes:after {
        content: '';
        background-color: #1f1f1f;
        width: 4vw;
        height: 4vw;
        max-width: 4vh;
        max-height: 4vh;
        display: block;
        position: absolute;
        top: 75%;
        left: 50%;
        box-sizing: border-box;
        border-radius: 50%;
        transform: translate(-50%, -50%);
    }

    .needle#seconds {
        background-color: #cb2f2f;
        width: 1%;
        height: 50%;
        transform-origin: center 75%;
        transform: translate(-50%, -75%);
    }

    .needle#seconds.moving {
        transition: transform 150ms ease-out;
    }

    .needle#seconds:after {
        content: '';
        background-color: #cb2f2f;
        width: 2.5vw;
        height: 2.5vw;
        max-width: 2.5vh;
        max-height: 2.5vh;
        display: block;
        position: absolute;
        top: 75%;
        left: 50%;
        box-sizing: border-box;
        border-radius: 50%;
        transform: translate(-50%, -50%);
    }
    .clock_logo{
        width: 10vw;
        height: 10vw;
        max-width: 10vh;
        max-height: 10vh;
        position: absolute;
        top: 50%;
        left: 50%;
        box-sizing: border-box;
        border-radius: 50%;
        transform: translate(-50%, -50%);
        background-size: 100% 100%;
        background-repeat: no-repeat;
    }
    @media (min-width: 100vh) {
        .clock {
            border: solid 2.8vh #242424;
            box-shadow: 0 1.4vh 2.8vh rgba(0, 0, 0, 0.8);
        }
    }

</style>





            </div>
        
            <div class="nexmoe-pd-item">
                <div class="qweather" >
    <div id="he-plugin-standard"></div>
    <div class="qweather-logo">

    </div>

</div>
<style>
    .qweather{
        position: relative;
    }
    .qweather-logo{
        position: absolute;
        right: 0;
        top: -15px;
        width: 40px;
        height: 40px;
        background-size: 100% 100%;
        background-repeat: no-repeat;
    }
</style>
<script>
  WIDGET = {
    "CONFIG": {
      "layout": "2",
      "width": "260",
      "height": "220",
      "background": "5",
      "dataColor": "e67249",
      "borderRadius": "15",
      "key": "f74d1e1690e6432d801e97fa2f05a162"
    }
  }
</script>
<script src="https://widget.qweather.net/standard/static/js/he-standard-common.js?v=2.0"></script>

            </div>
        
</div>
<style>
    .nexmoe-pd {
        left: auto;
        top: 40px;
        right: 0;
    }
    .nexmoe-pd-item{
       display: flex;
        justify-content: center;
        margin-bottom: 30px;
    }
</style>

  </div>
  <script src="https://lib.baomitu.com/lazysizes/5.1.0/lazysizes.min.js"></script>
<script src="https://lib.baomitu.com/highlight.js/10.0.0/highlight.min.js"></script>
<script src="https://lib.baomitu.com/mdui/0.4.3/js/mdui.min.js"></script>

<script>
	hljs.initHighlightingOnLoad();
</script>

<script src="https://lib.baomitu.com/jquery/3.5.1/jquery.slim.min.js"></script>
<script src="/lib/fancybox/js/jquery.fancybox.min.js"></script>


<script src="/js/app.js?v=1719645310119"></script>

<script src="https://lib.baomitu.com/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>
<script>
	$(".justified-gallery").justifiedGallery({
		rowHeight: 160,
		margins: 10,
	});
</script>

  





<!-- hexo injector body_end start -->
<script src="https://lib.baomitu.com/clipboard.js/2.0.8/clipboard.min.js"></script>

<script src="/lib/codeBlock/codeBlockFuction.js"></script>

<script src="/lib/codeBlock/codeLang.js"></script>

<script src="/lib/codeBlock/codeCopy.js"></script>

<script src="/lib/codeBlock/codeShrink.js"></script>

<link rel="stylesheet" href="/lib/codeBlock/matery.css">

<script src="/js/clock.js"></script>

<script src="https://code.jquery.com/jquery-3.6.0.js"></script>

<script src="/js/search.js"></script>

<script src="/js/webapp.js"></script>
<!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":200,"height":400},"mobile":{"show":false},"rect":{"opacity":0.7},"position":"relative","z-index":1,"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>

<script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/250cb4aa.js","daovoice")</script>
<script>
  daovoice('init', {
    app_id: "250cb4aa"
  });
  daovoice('update');
</script>

